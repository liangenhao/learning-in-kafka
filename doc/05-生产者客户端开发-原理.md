---
title: 05-生产者客户端开发-原理
date: 2019-08-04
categories: learning-in-kafka
tags: [Kafka]
---

## 生产者客户端整体架构

![生产者客户端整体架构](/Users/enhao/Documents/projects/GitHub/learning-in-kafka/doc/images/%E7%94%9F%E4%BA%A7%E8%80%85%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84.png)

整个生产者客户端由**两个线程协调运行**，分别为**主线程**和**Send线程（发送线程）**。

### 主线程

主线程中由`KafkaProducer`创建消息，然后通过可能的拦截器、序列化器和分区器的作用之后缓存到消息累加器`RecordAccumulator`中。

### Send线程

Send线程负责从`RecordAccumulator`中获取消息并将其发送到Kafka中。

